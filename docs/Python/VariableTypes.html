

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. 变量类型 &mdash; Python  文档</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://self-contained.github.io/Python/VariableTypes.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/translations.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="5. 函数与迭代器" href="Functions.html" />
    <link rel="prev" title="3. 流程控制语句" href="ControlFlow.html" />
 

<link rel="stylesheet" type="text/css" href="/_config/static/DataTables/datatables.min.css"/>

<meta name="google-site-verification" content="ZsXR1o8suFFOr_MSgo5BTvjbznAuEP6XYOmgMiBu5Yw" />
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-90643174-3']);
  _gaq.push(['_trackPageview']);
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Python
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
<div class="home-button">
   <a class="home-button" href="https://github.com/self-contained/self-contained.github.io">
      Github 仓库</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="home-button" href="/">博客主站</a>
</div>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Python 安装与配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fundamentals.html">2. Python 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="ControlFlow.html">3. 流程控制语句</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. 变量类型</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#布尔型与空对象">4.1. 布尔型与空对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#布尔型">4.1.1. 布尔型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#空对象">4.1.2. 空对象</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#数字类型：int,-float,-complex">4.2. 数字类型：int, float, complex</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#类型转换与取整">4.2.1. 类型转换与取整</a></li>
<li class="toctree-l3"><a class="reference internal" href="#比较数字大小">4.2.2. 比较数字大小</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#列表：list">4.3. 列表：list</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#索引元素">4.3.1. 索引元素</a></li>
<li class="toctree-l3"><a class="reference internal" href="#元素个数">4.3.2. 元素个数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#追加">4.3.3. 追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#插入">4.3.4. 插入</a></li>
<li class="toctree-l3"><a class="reference internal" href="#排序">4.3.5. 排序</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#按值排序">4.3.5.1. 按值排序</a></li>
<li class="toctree-l4"><a class="reference internal" href="#反序">4.3.5.2. 反序</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#查询">4.3.6. 查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="#删除">4.3.7. 删除</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#按索引删除">4.3.7.1. 按索引删除</a></li>
<li class="toctree-l4"><a class="reference internal" href="#按值删除">4.3.7.2. 按值删除</a></li>
<li class="toctree-l4"><a class="reference internal" href="#清空列表">4.3.7.3. 清空列表</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#最值">4.3.8. 最值</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#高级列表操作">4.4. 高级列表操作</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#列表展开">4.4.1. 列表展开</a></li>
<li class="toctree-l3"><a class="reference internal" href="#列表解析">4.4.2. 列表解析</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#元组">4.5. 元组</a></li>
<li class="toctree-l2"><a class="reference internal" href="#字符串">4.6. 字符串</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#强制类型转换">4.6.1. 强制类型转换</a></li>
<li class="toctree-l3"><a class="reference internal" href="#转义与-r-字符串">4.6.2. 转义与 r 字符串</a></li>
<li class="toctree-l3"><a class="reference internal" href="#字符串索引">4.6.3. 字符串索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="#分割字符串">4.6.4. 分割字符串</a></li>
<li class="toctree-l3"><a class="reference internal" href="#合并字符串：join()">4.6.5. 合并字符串：join()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#替换子字符串：replace()">4.6.6. 替换子字符串：replace()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#检查首尾匹配：startswith()-/-endswith()">4.6.7. 检查首尾匹配：startswith() / endswith()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#清除首尾字符：strip()">4.6.8. 清除首尾字符：strip()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#字符串格式化：format()-与-f-字符串">4.6.9. 字符串格式化：format() 与 f 字符串</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#format()-方法">4.6.9.1. format() 方法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#f-字符串">4.6.9.2. f 字符串</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#大小写转换*">4.6.10. 大小写转换*</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#字典：dict">4.7. 字典：dict</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#字典初始化">4.7.1. 字典初始化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#字典的视图">4.7.2. 字典的视图</a></li>
<li class="toctree-l3"><a class="reference internal" href="#按键索引值：get()-/-setdefault()">4.7.3. 按键索引值：get() / setdefault()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#删除项：pop()-/-popitem()">4.7.4. 删除项：pop() / popitem()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#更新字典：update()">4.7.5. 更新字典：update()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#更改键名*">4.7.6. 更改键名*</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#集合">4.8. 集合</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#集合运算与包含关系">4.8.1. 集合运算与包含关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="#更新集合">4.8.2. 更新集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="#增删元素">4.8.3. 增删元素</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#其他">4.9. 其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Functions.html">5. 函数与迭代器</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileIO.html">6. 文件读写与 os 库</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">4. </span>变量类型</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/VariableTypes.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="变量类型">
<h1><span class="section-number">4. </span>变量类型<a class="headerlink" href="#变量类型" title="永久链接至标题">¶</a></h1>
<p>本章介绍 Python 的内置变量类型。</p>
<p>我认为以下内置变量类型是在 Python 中经常用到、或者必须有所了解的：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 12%" />
<col style="width: 61%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>类型</p></th>
<th class="head"><p>关键字</p></th>
<th class="head"><p>说明</p></th>
<th class="head"><p>例子</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>【数字】</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>整型</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>整数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">-1</span></code></p></td>
</tr>
<tr class="row-even"><td><p>浮点型</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>浮点数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>复数型</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">complex</span></code></p></td>
<td><p>复数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">complex(1,2)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>【序列】</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>列表</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list</span></code></p></td>
<td><p>一串有序的可变数据序列，每一项数据可以是任意类型。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2]</span></code></p></td>
</tr>
<tr class="row-even"><td><p>元组</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tuple</span></code></p></td>
<td><p>一串有序的不可变数据序列，在创建时就固定了每一项的数据值。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>字符串</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p>一串文本字符组成的不可变序列。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;string&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>【映射】</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>字典</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dict</span></code></p></td>
<td><p>一些互不相同的键及它们各自对应的值组成的键值对数据集。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{&quot;a&quot;:1,</span> <span class="pre">&quot;b&quot;:2}</span></code></p></td>
</tr>
<tr class="row-even"><td><p>【集合】</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>集合</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">set</span></code></p></td>
<td><p>一些互不相同的数据值组成的无序可变数据集。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">2}</span></code></p></td>
</tr>
<tr class="row-even"><td><p>【其他】</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>布尔型</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>表示真或假的逻辑类型。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-even"><td><p>空对象</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>表示空。</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
<p>以上并不是 Python 的全部内置类型：</p>
<ul class="simple">
<li><p>一些高级的、复杂的变量类型，例如 <code class="docutils literal notranslate"><span class="pre">range</span></code> 构造器，不再在这里列出。它们会在后续的章节进行介绍。</p></li>
<li><p>一些较少使用到的类型，比如 <code class="docutils literal notranslate"><span class="pre">byte</span></code> 二进制字节类型，不会在本文的任何章节介绍。</p></li>
</ul>
<div class="section" id="布尔型与空对象">
<h2><span class="section-number">4.1. </span>布尔型与空对象<a class="headerlink" href="#布尔型与空对象" title="永久链接至标题">¶</a></h2>
<p>在介绍其他的变量类型之前，先介绍这两个特殊的类型。</p>
<div class="section" id="布尔型">
<h3><span class="section-number">4.1.1. </span>布尔型<a class="headerlink" href="#布尔型" title="永久链接至标题">¶</a></h3>
<p>布尔型有真（True）或假（False）两种逻辑值，单词的首字母大写。常用的逻辑运算：</p>
<ul class="simple">
<li><p>逻辑与：全真才为真 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span></code></p></li>
<li><p>逻辑或：含真即为真 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">or</span> <span class="pre">y</span></code></p></li>
<li><p>逻辑非： <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">x</span></code></p></li>
<li><p>逻辑异或：相异为真 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">^</span> <span class="pre">y</span></code></p></li>
</ul>
<p>以上 <code class="docutils literal notranslate"><span class="pre">x</span></code> 与 <code class="docutils literal notranslate"><span class="pre">y</span></code> 均是布尔型变量。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">y</span> <span class="o">=</span> <span class="kc">False</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span> <span class="ow">and</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="ow">or</span> <span class="n">y</span><span class="p">,</span> <span class="ow">not</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">^</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
False True False True
</pre></div></div>
</div>
</div>
<div class="section" id="空对象">
<h3><span class="section-number">4.1.2. </span>空对象<a class="headerlink" href="#空对象" title="永久链接至标题">¶</a></h3>
<p>None 是 Python 中的空对象，它或许并不常用，但读者有必要了解。</p>
<p>空对象的逻辑值为假：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
False
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="数字类型：int,-float,-complex">
<h2><span class="section-number">4.2. </span>数字类型：int, float, complex<a class="headerlink" href="#数字类型：int,-float,-complex" title="永久链接至标题">¶</a></h2>
<p>数字类型没有太多需要介绍的地方。</p>
<ul class="simple">
<li><p>四则运算：<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code></p></li>
<li><p>整除与取余：<code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">//</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">%</span> <span class="pre">b</span></code>；或者 <code class="docutils literal notranslate"><span class="pre">c,</span> <span class="pre">d</span> <span class="pre">=</span> <span class="pre">divmod(a,b)</span></code>。</p>
<ul>
<li><p>这里的整除是指向负无穷取整，例如 <code class="docutils literal notranslate"><span class="pre">-5//2</span></code> 的结果是 <code class="docutils literal notranslate"><span class="pre">-3</span></code>。</p></li>
<li><p>复数不能参与整除或取余运算。</p></li>
</ul>
</li>
<li><p>乘方：<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">**</span> <span class="pre">b</span></code>，或者 <code class="docutils literal notranslate"><span class="pre">pow(a,</span> <span class="pre">b)</span></code></p></li>
<li><p>取模：<code class="docutils literal notranslate"><span class="pre">abs(a)</span></code>。如果 <code class="docutils literal notranslate"><span class="pre">a</span></code> 是复数，那么会计算模长；如果是整数或浮点数，实质上就是取绝对值。</p></li>
<li><p>自运算：<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span></code> 即 <code class="docutils literal notranslate"><span class="pre">a</span></code> 自增 1；同理有 <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code></p></li>
</ul>
<p>值得注意的点：</p>
<ul class="simple">
<li><p><strong>只要有除法参与的数学运算，其结果一定是浮点型</strong>。</p></li>
<li><p><strong>只要有浮点型参与的数学运算，其结果也一定是浮点型</strong>。</p></li>
<li><p>Python 的内部机制已经处理了整数溢出的问题，因此无须担心。</p></li>
<li><p>虽然在数学上不合法，但是在 Python（以及一众编程语言）中，<code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">**</span> <span class="pre">0</span></code> 等于 1。</p></li>
</ul>
<p>特别地，浮点型中还包含两个特殊的值，分别是”非数“（Not a Number, <code class="docutils literal notranslate"><span class="pre">nan</span></code>）与”正/负无穷“（Infinity, <code class="docutils literal notranslate"><span class="pre">inf</span></code>）：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="s1">&#39;nan&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">,</span> <span class="s1">&#39;-inf&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nan inf -inf
</pre></div></div>
</div>
<p>复数的使用非常少见，随便举个例子吧：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(3+4j) 5.0
</pre></div></div>
</div>
<div class="section" id="类型转换与取整">
<h3><span class="section-number">4.2.1. </span>类型转换与取整<a class="headerlink" href="#类型转换与取整" title="永久链接至标题">¶</a></h3>
<p>Python 中从浮点型到整型的强制类型转换会截断小数点之后的部分：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.6</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 1 -1 -1
</pre></div></div>
</div>
<p>要实现复杂的取整控制，可以调用 Python 内置的 <code class="docutils literal notranslate"><span class="pre">math</span></code> 模块：</p>
<ul class="simple">
<li><p>floor：向负无穷取整。</p></li>
<li><p>ceil：向正无穷取整。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">math</span>  <span class="c1"># 导入 math 模块</span>

<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 2 -2 -1
</pre></div></div>
</div>
<p>不过在我个人的实践中，取整与四舍五入进位的任务通常由 <code class="docutils literal notranslate"><span class="pre">numpy</span></code> 库代劳；有兴趣的读者，可以阅读 Numpy 的相关函数：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.round_.html">numpy.round</a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.floor.html">numpy.floor</a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ceil.html">numpy.ceil</a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.trunc.html">numpy.trunc</a></p></li>
</ul>
</div>
<div class="section" id="比较数字大小">
<h3><span class="section-number">4.2.2. </span>比较数字大小<a class="headerlink" href="#比较数字大小" title="永久链接至标题">¶</a></h3>
<p>常规的数字大小判断：</p>
<ul class="simple">
<li><p>小于 <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> 与小于等于 <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></li>
<li><p>大于 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 与大于等于 <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></li>
<li><p>等于 <code class="docutils literal notranslate"><span class="pre">==</span></code> 与不等于 <code class="docutils literal notranslate"><span class="pre">!=</span></code></p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>特别地，Python 还支持“三元比较”：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True True True
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">重要</p>
<p>不要试图用双等号比较两个浮点值的是否相等！</p>
</div>
<p>浮点计算是有精度的，直接比较它们是否相等是不明智的：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span>
<span class="n">z</span> <span class="o">=</span> <span class="mf">0.3</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">==</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.30000000000000004 0.3 False
</pre></div></div>
</div>
<p>关于高精度的数学计算，推荐配合科学计算库 NumPy 使用。</p>
</div>
</div>
<div class="section" id="列表：list">
<h2><span class="section-number">4.3. </span>列表：list<a class="headerlink" href="#列表：list" title="永久链接至标题">¶</a></h2>
<p>Python 的三种常用序列 list, tuple, str, 我们先讲列表 list；列表大概是最接近其他编程语言的序列了。</p>
<ul class="simple">
<li><p>列表序号从 0 开始。</p></li>
<li><p>Python 中的列表类似于其他语言的数组，不过列表的长度可变、并且元素不必是同一类型的。</p></li>
</ul>
<p><em>虽然列表中可以包含不同类型的元素，但从编程习惯上说，个人不推荐这样做。</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 空列表</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, &#39;a&#39;, 4]
</pre></div></div>
</div>
<p>Python 中的列表默认支持常见所有的序列操作：</p>
<ul class="simple">
<li><p>索引元素：单个选取 <code class="docutils literal notranslate"><span class="pre">x[index]</span></code> ，切片型选取 <code class="docutils literal notranslate"><span class="pre">x[start:end:step]</span></code></p></li>
<li><p>元素个数： <code class="docutils literal notranslate"><span class="pre">len(x)</span></code></p></li>
<li><p>追加：单个元素 <code class="docutils literal notranslate"><span class="pre">x.append(item)</span></code> ，追加一个列表 <code class="docutils literal notranslate"><span class="pre">x.extend(y)</span></code></p></li>
<li><p>插入： <code class="docutils literal notranslate"><span class="pre">x.insert(index,</span> <span class="pre">item)</span></code></p></li>
<li><p>排序：</p>
<ul>
<li><p>按值排序：<code class="docutils literal notranslate"><span class="pre">x.sort()</span></code> ，或者带返回值的 <code class="docutils literal notranslate"><span class="pre">sorted(x)</span></code></p></li>
<li><p>反序：<code class="docutils literal notranslate"><span class="pre">x.reverse()</span></code> ，或者带返回值的 <code class="docutils literal notranslate"><span class="pre">reversed(x)</span></code></p></li>
</ul>
</li>
<li><p>查询：</p>
<ul>
<li><p>判断是否包含 <code class="docutils literal notranslate"><span class="pre">item</span> <span class="pre">in</span> <span class="pre">x</span></code></p></li>
<li><p>判断包含的次数 <code class="docutils literal notranslate"><span class="pre">x.count(item)</span></code></p></li>
<li><p>返回索引序数 <code class="docutils literal notranslate"><span class="pre">x.index(item)</span></code></p></li>
</ul>
</li>
<li><p>删除：</p>
<ul>
<li><p>按索引：弹出并返回一个元素 <code class="docutils literal notranslate"><span class="pre">x.pop(index)</span></code> ，直接删除元素 <code class="docutils literal notranslate"><span class="pre">del(x[index])</span></code></p></li>
<li><p>按值：移除等于给定值的项 <code class="docutils literal notranslate"><span class="pre">x.remove(item)</span></code></p></li>
<li><p>清空： <code class="docutils literal notranslate"><span class="pre">x.clear()</span></code></p></li>
</ul>
</li>
<li><p>最值：最大值 <code class="docutils literal notranslate"><span class="pre">max(x)</span></code> ，最小值 <code class="docutils literal notranslate"><span class="pre">min(x)</span></code></p></li>
</ul>
<p>上述叙述中， <code class="docutils literal notranslate"><span class="pre">x</span></code> 与 <code class="docutils literal notranslate"><span class="pre">y</span></code> 均表示列表， <code class="docutils literal notranslate"><span class="pre">index</span></code> 表示序数（整数类型）， <code class="docutils literal notranslate"><span class="pre">item</span></code> 表示列表元素。</p>
<div class="section" id="索引元素">
<h3><span class="section-number">4.3.1. </span>索引元素<a class="headerlink" href="#索引元素" title="永久链接至标题">¶</a></h3>
<p>列表中最基础的操作就是根据索引序号，取出单个（或多个）元素：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 5
</pre></div></div>
</div>
<p>Python 支持负数索引，比如 <code class="docutils literal notranslate"><span class="pre">x[-1]</span></code> 表示列表的倒数第 1 位元素：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
4
</pre></div></div>
</div>
<p>Python 支持一种切片语法，可以指定索引序号的起始、终止、步长，来选取多个元素。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x[start:end]</span></code> ：从 <code class="docutils literal notranslate"><span class="pre">x[start]</span></code> 依次选取到 <code class="docutils literal notranslate"><span class="pre">x[end-1]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x[start:end:step]</span></code> ：从 <code class="docutils literal notranslate"><span class="pre">x[start]</span></code> 每 <code class="docutils literal notranslate"><span class="pre">step</span></code> 个元素选取依次，直到 <code class="docutils literal notranslate"><span class="pre">x[end-1]</span></code> （或它之前最后一个能被选取到的元素）。步长可以是负数，但相应地必须有 start &gt;= end</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x[start:]</span></code> 或者 <code class="docutils literal notranslate"><span class="pre">x[:end]</span></code> ：从 <code class="docutils literal notranslate"><span class="pre">x[start]</span></code> 选取到末尾，或者从起始选取到 <code class="docutils literal notranslate"><span class="pre">x[end-1]</span></code> 。这其实是忽略了冒号一侧的项，也可以用空值 None 补位</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">重要</p>
<p>切片选取的结束是第 end-1 个元素，而不是第 end 个元素。</p>
<p>Python这样设计的原因是，这样保证了切片 x[start:end] 的长度恰好是 end 减去 start，而不是 end-start+1.</p>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 选取 0 到 3，注意末尾被舍去</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, 3, 4]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 选取 0 到 3 (或4)，每 2 个选取一次</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 3] [1, 3, 5]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 负数步长</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[5, 4, 3, 2, 1]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 从 1 选取到末尾，或从起始选取至倒数第 2 项</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[2, 3, 4, 5] [1, 2, 3, 4]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 也可以忽略某一项，等同于 None</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="kc">None</span><span class="p">:</span><span class="kc">None</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 3, 5] [1, 3, 5]
</pre></div></div>
</div>
<p>赋值可以直接进行：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>  <span class="c1"># 本质是将右侧解包，然后分别传入两个元素位</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[6, 7, 3, 4, 5]
</pre></div></div>
</div>
</div>
<div class="section" id="元素个数">
<h3><span class="section-number">4.3.2. </span>元素个数<a class="headerlink" href="#元素个数" title="永久链接至标题">¶</a></h3>
<p>Python 的 <code class="docutils literal notranslate"><span class="pre">len()</span></code> 函数是一个独立的函数，并不是通过 <code class="docutils literal notranslate"><span class="pre">x.len()</span></code> 的方式调用的。这其中设计的差别，读者可以仔细体会。</p>
<p>该函数不止适用于列表，也适用于其他序列类型。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
5
</pre></div></div>
</div>
</div>
<div class="section" id="追加">
<h3><span class="section-number">4.3.3. </span>追加<a class="headerlink" href="#追加" title="永久链接至标题">¶</a></h3>
<p>Python 的追加元素使用 <code class="docutils literal notranslate"><span class="pre">x.append()</span></code> ：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, 3, 4, 5, -2]
</pre></div></div>
</div>
<p>要追加一个列表，使用 <code class="docutils literal notranslate"><span class="pre">x.extend()</span></code> ：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, 3, 4, 5, -2, -1]
</pre></div></div>
</div>
<p>注意， <code class="docutils literal notranslate"><span class="pre">x.append()</span></code> 这种 Python 内置实例的方法并不返回任何值。所以，你不能把它赋值到另一个变量：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>  <span class="c1"># 无效的赋值，因为它并没有返回值</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
</pre></div></div>
</div>
<p>要实现这种“返回值”效果，可以考虑下面两种方法之一：</p>
<ul class="simple">
<li><p>加号：Python 支持用加号连接两个可变列表，从而把它们“融合”在一起</p></li>
<li><p>星号：Python 支持用前缀星号的方式进行列表展开</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, 3, 4, 5] [1, 2, 3, 4, 5]
</pre></div></div>
</div>
</div>
<div class="section" id="插入">
<h3><span class="section-number">4.3.4. </span>插入<a class="headerlink" href="#插入" title="永久链接至标题">¶</a></h3>
<p>用 <code class="docutils literal notranslate"><span class="pre">x.insert(index,</span> <span class="pre">item)</span></code> 将元素插入到第 <code class="docutils literal notranslate"><span class="pre">index</span></code> 个元素的位置，原第 index 及以后的元素依次后移：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 插入到 x[1] 处</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, -1, 2, 3] -1
</pre></div></div>
</div>
<p>要实现类似上一小节的“返回值”效果，仍然可以使用加号或者星号两种方式：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">item</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">x</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> <span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, -1, 2, 3] [1, -1, 2, 3]
</pre></div></div>
</div>
</div>
<div class="section" id="排序">
<h3><span class="section-number">4.3.5. </span>排序<a class="headerlink" href="#排序" title="永久链接至标题">¶</a></h3>
<div class="section" id="按值排序">
<h4><span class="section-number">4.3.5.1. </span>按值排序<a class="headerlink" href="#按值排序" title="永久链接至标题">¶</a></h4>
<p>用 <code class="docutils literal notranslate"><span class="pre">x.sort()</span></code> 对列表进行排序，默认是按升序。Python 的排序是稳定排序。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 2, 3, 4]
</pre></div></div>
</div>
<p>添加 <code class="docutils literal notranslate"><span class="pre">reverse=True</span></code> 选项，可以按降序进行排列。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[4, 3, 2, 1]
</pre></div></div>
</div>
<p>如果列表内的元素不是数字，是列表或其他序列，会按 <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> 比较的方式来排序。下面是对列表元素进行排序：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="n">x</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[1, 2], [3, 2], [3, 4], [4, 3, 2]]
</pre></div></div>
</div>
<p>要实现类似上一小节的“返回值”效果，仍然可以使用加号或者星号两种方式：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[4, 3, 2, 1]
</pre></div></div>
</div>
</div>
<div class="section" id="反序">
<h4><span class="section-number">4.3.5.2. </span>反序<a class="headerlink" href="#反序" title="永久链接至标题">¶</a></h4>
<p>列表反序有三种方式：</p>
<ul class="simple">
<li><p>就地反序： <code class="docutils literal notranslate"><span class="pre">x.reverse()</span></code></p></li>
<li><p>带返回值的反序：</p>
<ul>
<li><p>利用 <code class="docutils literal notranslate"><span class="pre">reversed</span></code> 生成器： <code class="docutils literal notranslate"><span class="pre">list(reversed(x))</span></code></p></li>
<li><p>利用步长为 -1 的切片： <code class="docutils literal notranslate"><span class="pre">x[::-1]</span></code></p></li>
</ul>
</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">x_copy</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">y1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">x_copy</span><span class="p">))</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">x_copy</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y1</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[2, 3, 4, 1] True True
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="查询">
<h3><span class="section-number">4.3.6. </span>查询<a class="headerlink" href="#查询" title="永久链接至标题">¶</a></h3>
<p>要查询一个元素是否在列表中，使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 关键字：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="mi">2</span> <span class="ow">in</span> <span class="n">x</span><span class="p">,</span> <span class="mi">5</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True False
</pre></div></div>
</div>
<p>相反地，要确定一个元素是否不再列表中，使用 <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> 来取非：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="mi">2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">x</span><span class="p">,</span> <span class="mi">5</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
False True
</pre></div></div>
</div>
<p>要查询一个元素在列表中的位置，使用 <code class="docutils literal notranslate"><span class="pre">x.index(item)</span></code> 。</p>
<ul class="simple">
<li><p>如果列表中该元素出现了多次， <code class="docutils literal notranslate"><span class="pre">x.index()</span></code> 只会返回最靠前的那项对应的索引序数。</p></li>
<li><p>如果要返回该元素在列表中出现的所有位置，可以使用列表解析（参考下方的<a class="reference external" href="#列表解析">列表解析</a>一节）功能。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">item</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">item</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
[1, 3]
</pre></div></div>
</div>
<p>如果 <code class="docutils literal notranslate"><span class="pre">item</span></code> 不在列表中，这样会弹出 ValueError 错误，提示你要查询的对象并不在列表中：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-52-96ad5df81983&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>x<span class="ansi-yellow-intense-fg ansi-bold">.</span>index<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-cyan-intense-fg ansi-bold">5</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-red-intense-fg ansi-bold">ValueError</span>: 5 is not in list
</pre></div></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">x.count()</span></code> 函数，可以避免该错误：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">x</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2 0
</pre></div></div>
</div>
</div>
<div class="section" id="删除">
<h3><span class="section-number">4.3.7. </span>删除<a class="headerlink" href="#删除" title="永久链接至标题">¶</a></h3>
<div class="section" id="按索引删除">
<h4><span class="section-number">4.3.7.1. </span>按索引删除<a class="headerlink" href="#按索引删除" title="永久链接至标题">¶</a></h4>
<p>用 <code class="docutils literal notranslate"><span class="pre">x.pop()</span></code> 弹出列表末尾的元素，或用 <code class="docutils literal notranslate"><span class="pre">x.pop(index)</span></code> 弹出第 index 位的元素：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
4 [1, 2, 3]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3 [1, 2, 4]
</pre></div></div>
</div>
<p>或者直接用 <code class="docutils literal notranslate"><span class="pre">del(index)</span></code> 命令来删除元素 <code class="docutils literal notranslate"><span class="pre">x[index]</span></code> ：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">del</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 3, 4]
</pre></div></div>
</div>
</div>
<div class="section" id="按值删除">
<h4><span class="section-number">4.3.7.2. </span>按值删除<a class="headerlink" href="#按值删除" title="永久链接至标题">¶</a></h4>
<p>给定一个值 <code class="docutils literal notranslate"><span class="pre">item</span></code> ，用 <code class="docutils literal notranslate"><span class="pre">x.remove(item)</span></code> 可以删除列表中等于 <code class="docutils literal notranslate"><span class="pre">item</span></code> 的项：</p>
<ul class="simple">
<li><p>类似于 <code class="docutils literal notranslate"><span class="pre">x.index()</span></code> ，它只会删除最靠前的匹配项。</p></li>
<li><p>考虑使用列表解析（参考下方的<a class="reference external" href="#列表解析">列表解析</a>一节）来移除所有的匹配项。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">x_copy</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">item</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">x</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x_copy</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">item</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 3, 2]
[1, 3]
</pre></div></div>
</div>
</div>
<div class="section" id="清空列表">
<h4><span class="section-number">4.3.7.3. </span>清空列表<a class="headerlink" href="#清空列表" title="永久链接至标题">¶</a></h4>
<p>使用 <code class="docutils literal notranslate"><span class="pre">x.clear()</span></code> 来清空列表为 <code class="docutils literal notranslate"><span class="pre">[]</span></code> ：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[]
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="最值">
<h3><span class="section-number">4.3.8. </span>最值<a class="headerlink" href="#最值" title="永久链接至标题">¶</a></h3>
<p>用 <code class="docutils literal notranslate"><span class="pre">max()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">min()</span></code> 函数返回列表中的最值。类似于 <code class="docutils literal notranslate"><span class="pre">len()</span></code> ，这两个函数对其他的序列变量类型也同样有效。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 4
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="高级列表操作">
<h2><span class="section-number">4.4. </span>高级列表操作<a class="headerlink" href="#高级列表操作" title="永久链接至标题">¶</a></h2>
<div class="section" id="列表展开">
<h3><span class="section-number">4.4.1. </span>列表展开<a class="headerlink" href="#列表展开" title="永久链接至标题">¶</a></h3>
<p>可以“就地”把列表拆开成多个以逗号分隔的元素。除了上文提到的展开为列表中的项（比如 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">*x,</span> <span class="pre">2]</span></code> ），更常见的是拆成函数的传入参数。比如取余函数 <code class="docutils literal notranslate"><span class="pre">divmod()</span></code> 接受两个参数：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="o">*</span><span class="n">x</span><span class="p">))</span>  <span class="c1"># 7÷2=3 … 1</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(3, 1)
</pre></div></div>
</div>
</div>
<div class="section" id="列表解析">
<h3><span class="section-number">4.4.2. </span>列表解析<a class="headerlink" href="#列表解析" title="永久链接至标题">¶</a></h3>
<p>列表解析（也称列表推导）通过 for 循环与 if 判断来筛选列表中的元素。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">10</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]]</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">if</span> <span class="n">k</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[11, 12, 13]
[1, 3, 5]
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="元组">
<h2><span class="section-number">4.5. </span>元组<a class="headerlink" href="#元组" title="永久链接至标题">¶</a></h2>
<p>Python 中的元组与列表类似，但是元素不可变。</p>
<ul class="simple">
<li><p>元组与列表有不同的使用场景。</p></li>
<li><p>元组的元素之间以逗号隔开，外侧的圆括号是可选的。</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>  <span class="c1"># 等同于 x = (1, 2, 3)</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">()</span>       <span class="c1"># 空元组</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>     <span class="c1"># 单元素元组</span>
</pre></div>
</div>
</div>
<p>元组也可以解包，将内部值赋给多个变量：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">x</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 2 3
</pre></div></div>
</div>
<p>元组的索引与列表的方式一致，只是不能赋值给元组中的元素：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">x</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1, 3, 5)
</pre></div></div>
</div>
<p>元组的长度也可以用 <code class="docutils literal notranslate"><span class="pre">len()</span></code> 函数获取：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3
</pre></div></div>
</div>
</div>
<div class="section" id="字符串">
<h2><span class="section-number">4.6. </span>字符串<a class="headerlink" href="#字符串" title="永久链接至标题">¶</a></h2>
<p>字符串是一种不可变序列。因此，字符串不存在“就地改动”，任何字符串方法都不会改变原字符串的值。</p>
<p>它在创建时可以用单引号包括，也可以用双引号包括。内部的引号可以用反斜线 <code class="docutils literal notranslate"><span class="pre">\</span></code> 转义：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;It&#39;s a string.&quot;</span>
<span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;It</span><span class="se">\&#39;</span><span class="s1">s a string.&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
It&#39;s a string. It&#39;s a string. True
</pre></div></div>
</div>
<p>字符串可以用加号与乘号来进行连接与重复；如果要连接的均是字符串面值（直接用引号括起的值，而不是字符串变量），可以用空格进行连接。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="s2">&quot;def&quot;</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;This is a single-line string &quot;</span>
     <span class="s2">&quot;but I can write it across lines.&quot;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;qwe&#39;</span>  <span class="c1"># 字符串变量也可用加号与面值连接</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
abcabcabcdef
This is a single-line string but I can write it across lines.
abcabcabcdefqwe
</pre></div></div>
</div>
<p>多行字符串可以用三个连续的单引号（或双引号）包括。多行字符串内容的所有换行都会被保留；可以在行尾添加一个反斜线 <code class="docutils literal notranslate"><span class="pre">\</span></code> 来忽略当前行的换行：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">This is</span>
<span class="s2">a multiline</span>
<span class="s2">string.</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
This is
a multiline
string.

</pre></div></div>
</div>
<div class="section" id="强制类型转换">
<h3><span class="section-number">4.6.1. </span>强制类型转换<a class="headerlink" href="#强制类型转换" title="永久链接至标题">¶</a></h3>
<p>用 <code class="docutils literal notranslate"><span class="pre">str()</span></code> 可以强制将其他类型转换为字符串（如果能够转换）：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">y</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">4</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
123
True
[3, [1, 2], 4]
</pre></div></div>
</div>
<p>字符串也可以转换为列表，本质是按字符依次拆开：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;abcdefg&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="转义与-r-字符串">
<h3><span class="section-number">4.6.2. </span>转义与 r 字符串<a class="headerlink" href="#转义与-r-字符串" title="永久链接至标题">¶</a></h3>
<p>常见的转移字符包括：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字符</p></th>
<th class="head"><p>含义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\b</span></code></p></td>
<td><p>退格</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\n</span></code></p></td>
<td><p>换行</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\r</span></code></p></td>
<td><p>回车（移动到行首）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\t</span></code></p></td>
<td><p>制表符</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\\</span></code></p></td>
<td><p>被转义的反斜线</p></td>
</tr>
</tbody>
</table>
<p>如果不想让反斜线进行转义，在字符串的 <strong>左侧引号之前</strong> 添加 <code class="docutils literal notranslate"><span class="pre">r</span></code> 实现：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;String with</span><span class="se">\t</span><span class="s2">TAB.&quot;</span>
<span class="n">y</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;String with\tTAB.&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
String with     TAB.
String with\tTAB.
</pre></div></div>
</div>
</div>
<div class="section" id="字符串索引">
<h3><span class="section-number">4.6.3. </span>字符串索引<a class="headerlink" href="#字符串索引" title="永久链接至标题">¶</a></h3>
<p>字符串的索引仍然是字符串。Python 中没有字符类型，单个字符只是长度为 1 的字符串。</p>
<p>字符串的索引仍然支持</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;This is a string.&quot;</span>
<span class="n">x</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;This i&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;Ti sasrn.&#39;
</pre></div></div>
</div>
<p>唯一不同于列表索引的是，字符串在切片选取时，可以超出索引范围而不报错：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;This is a string.&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">2333</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is a string.
</pre></div></div>
</div>
</div>
<div class="section" id="分割字符串">
<h3><span class="section-number">4.6.4. </span>分割字符串<a class="headerlink" href="#分割字符串" title="永久链接至标题">¶</a></h3>
<p>Python 中字符串分割函数主要有 <code class="docutils literal notranslate"><span class="pre">split()</span></code> ， <code class="docutils literal notranslate"><span class="pre">rsplit()</span></code> 与 <code class="docutils literal notranslate"><span class="pre">splitline()</span></code> 三个方法。</p>
<p>使用 <code class="docutils literal notranslate"><span class="pre">x.split(sep,</span> <span class="pre">maxsplit)</span></code> 来用 sep 字符串分割字符串 <code class="docutils literal notranslate"><span class="pre">x</span></code> ，并指定最多分割 maxsplit 次：</p>
<ul class="simple">
<li><p>分割字符串长度可以大于 1</p></li>
<li><p>默认的 <code class="docutils literal notranslate"><span class="pre">maxsplit=-1</span></code> ，即会完全分割字符串</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;This is a string.&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">))</span>     <span class="c1"># 默认完全分割</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># 最多分割 1 次，即分割成 2 份</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">))</span>     <span class="c1"># 空分割</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>        <span class="c1"># 默认以空格分割</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;Thi&#39;, &#39; i&#39;, &#39; a &#39;, &#39;tring.&#39;]
[&#39;Thi&#39;, &#39; is a string.&#39;]
[&#39;This is a string.&#39;]
[&#39;This&#39;, &#39;is&#39;, &#39;a&#39;, &#39;string.&#39;]
</pre></div></div>
</div>
<p>我们经常把这个技巧用在 for 循环语句中：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fruits</span> <span class="o">=</span> <span class="s2">&quot;apple,pear,orange,banana&quot;</span>
<span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
apple
pear
orange
banana
</pre></div></div>
</div>
<p>Python 还提供了 <code class="docutils literal notranslate"><span class="pre">rsplit()</span></code> ，可以从字符串的右侧开始分割。从下例比较两者的区别：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;This is a string.&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;Thi&#39;, &#39; is a string.&#39;]
[&#39;This is a &#39;, &#39;tring.&#39;]
</pre></div></div>
</div>
<p>最后是 <code class="docutils literal notranslate"><span class="pre">splitlines(keepends=False)</span></code> ，它可以按行分隔符集中的所有符号进行分割（因此比手动地使用 <code class="docutils literal notranslate"><span class="pre">split('\n')</span></code> 的效果更好）：</p>
<ul class="simple">
<li><p>在 <code class="docutils literal notranslate"><span class="pre">keepends=True</span></code> 时，它能保留换行符。</p></li>
<li><p>关于该函数认定的换行符号集，参考 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/stdtypes.html?highlight=join#str.splitlines">官方文档：str.splitlines()</a> 。</p></li>
<li><p>它与 <code class="docutils literal notranslate"><span class="pre">split()</span></code> 函数的另一个差别是对末尾空白行的处理，读者可以参考下例。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;line 1</span><span class="se">\n</span><span class="s2">line 2</span><span class="se">\r\n</span><span class="s2">line 3</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">keepends</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>  <span class="c1"># 多一行</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;line 1&#39;, &#39;line 2&#39;, &#39;line 3&#39;]
[&#39;line 1\n&#39;, &#39;line 2\r\n&#39;, &#39;line 3\n&#39;]
[&#39;line 1&#39;, &#39;line 2\r&#39;, &#39;line 3&#39;, &#39;&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="合并字符串：join()">
<h3><span class="section-number">4.6.5. </span>合并字符串：join()<a class="headerlink" href="#合并字符串：join()" title="永久链接至标题">¶</a></h3>
<p>与 <code class="docutils literal notranslate"><span class="pre">x.split(sep)</span></code> 相反， 函数 <code class="docutils literal notranslate"><span class="pre">sep.join(lst)</span></code> 则是将一个列表用指定的分割符连接起来，组成一个字符串：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;pear&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39; ~ &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
apple ~ pear ~ orange ~ banana
</pre></div></div>
</div>
</div>
<div class="section" id="替换子字符串：replace()">
<h3><span class="section-number">4.6.6. </span>替换子字符串：replace()<a class="headerlink" href="#替换子字符串：replace()" title="永久链接至标题">¶</a></h3>
<p>字符串替换方法 <code class="docutils literal notranslate"><span class="pre">x.split(old,</span> <span class="pre">new,</span> <span class="pre">count)</span></code> 用 new 来替换（从左向右）前 count 次搜索到的 old 子字符串。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;This is a string.&quot;</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Thit it a ttring.
Thit it a string.
</pre></div></div>
</div>
</div>
<div class="section" id="检查首尾匹配：startswith()-/-endswith()">
<h3><span class="section-number">4.6.7. </span>检查首尾匹配：startswith() / endswith()<a class="headerlink" href="#检查首尾匹配：startswith()-/-endswith()" title="永久链接至标题">¶</a></h3>
<p>用 <code class="docutils literal notranslate"><span class="pre">x.startswith(prefix)</span></code> 与 <code class="docutils literal notranslate"><span class="pre">x.endswith(suffix)</span></code> 这两个方法来检查字符串首尾端的子字符串是否匹配 prefix 或 suffix。比较常用的情形可能是检查文件的扩展名：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;doc-A.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;doc-B.md&quot;</span><span class="p">,</span> <span class="s2">&quot;Doc-C.txt&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;doc&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;doc - </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;txt&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;txt - </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
doc - doc-A.txt
txt - doc-A.txt
doc - doc-B.md
txt - Doc-C.txt
</pre></div></div>
</div>
</div>
<div class="section" id="清除首尾字符：strip()">
<h3><span class="section-number">4.6.8. </span>清除首尾字符：strip()<a class="headerlink" href="#清除首尾字符：strip()" title="永久链接至标题">¶</a></h3>
<p>用 <code class="docutils literal notranslate"><span class="pre">strip()</span></code> 清除两侧匹配的字符串，或者用 <code class="docutils literal notranslate"><span class="pre">lstrip()</span></code> 单独清除左侧的，或用 <code class="docutils literal notranslate"><span class="pre">rstrip()</span></code> 单独清除右侧的。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;doc-A.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;doc-B.md&quot;</span><span class="p">,</span> <span class="s2">&quot;Doc-C.txt&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;strip: </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">10</span><span class="si">}</span><span class="se">\t</span><span class="s2">&quot;</span>
         <span class="sa">f</span><span class="s2">&quot;lstrip: </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;doc-&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">10</span><span class="si">}</span><span class="se">\t</span><span class="s2">&quot;</span>
         <span class="sa">f</span><span class="s2">&quot;rstrip: </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;txt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
strip: oc-A.txt         lstrip: A.txt           rstrip: doc-A.
strip: oc-B.m           lstrip: B.md            rstrip: doc-B.md
strip: Doc-C.txt        lstrip: Doc-C.txt       rstrip: Doc-C.
</pre></div></div>
</div>
<p>默认的 <code class="docutils literal notranslate"><span class="pre">strip()</span></code> 函数会清除字符串两侧的空格——这有时在读取文件时会用到：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;line 1 </span><span class="se">\n</span><span class="s2"> line 2 </span><span class="se">\r\n\t</span><span class="s2">line 3</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="n">lines_strip</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">lines_strip</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;line 1 &#39;, &#39; line 2 &#39;, &#39;\tline 3&#39;]
[&#39;line 1&#39;, &#39;line 2&#39;, &#39;line 3&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="字符串格式化：format()-与-f-字符串">
<h3><span class="section-number">4.6.9. </span>字符串格式化：format() 与 f 字符串<a class="headerlink" href="#字符串格式化：format()-与-f-字符串" title="永久链接至标题">¶</a></h3>
<p>字符串格式化是一种将字符串中的一部分（通常以 <code class="docutils literal notranslate"><span class="pre">{}</span></code> 标记）以外部数据（比如变量值或者其他字符串）替换的方法。</p>
<ul class="simple">
<li><p>方法 <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 在任何版本的 Python 3 中受到支持</p></li>
<li><p>带有前缀 f 的格式化字符串（即 f-string 或 f 字符串）在 Python 3.6 开始被支持</p></li>
</ul>
<p>字符串还有一种以百分号 <code class="docutils literal notranslate"><span class="pre">%</span></code> 进行格式化的方法，是从 Python 2 时期延续下来的语法（在 Python 3 中也可以使用）。本文不再介绍这部分内容，有兴趣的读者可以自行查阅。</p>
<p>我们常常需要把变量的值（可能不是字符串类型）嵌入到字符串中，比如：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lang</span><span class="p">,</span> <span class="n">ver</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;We are learning &quot;</span> <span class="o">+</span> <span class="n">lang</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ver</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
We are learning Python 3.
</pre></div></div>
</div>
<p>上例中虽然用加法连接实现了这一点，但的确非常狼狈。</p>
<div class="section" id="format()-方法">
<h4><span class="section-number">4.6.9.1. </span>format() 方法<a class="headerlink" href="#format()-方法" title="永久链接至标题">¶</a></h4>
<p>Python 支持用 <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 的形式来格式化字符串：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[85]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lang</span><span class="p">,</span> <span class="n">ver</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;We are learning </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">ver</span><span class="p">)</span>

<span class="c1"># 也可以按名称访问</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;We are learning </span><span class="si">{mylang}</span><span class="s2"> </span><span class="si">{myver}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mylang</span><span class="o">=</span><span class="n">lang</span><span class="p">,</span> <span class="n">myver</span><span class="o">=</span><span class="n">ver</span><span class="p">)</span>

<span class="c1"># 甚至可以进行字典展开，参考字典章节</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mylang&quot;</span><span class="p">:</span> <span class="n">lang</span><span class="p">,</span> <span class="s2">&quot;myver&quot;</span><span class="p">:</span> <span class="n">ver</span><span class="p">}</span>
<span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;We are learning </span><span class="si">{mylang}</span><span class="s2"> </span><span class="si">{myver}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">z</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
We are learning Python 3.
True
True
</pre></div></div>
</div>
<p>上面的几种写法都可以得到相同的结果。如你所见，在格式化字符串中，我们用花括号来占位。默认的， <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 的输入参数都会被转为字符串格式。</p>
<ul class="simple">
<li><p>如果要在格式化字符串中打印花括号，请使用双写花括号（比如 <code class="docutils literal notranslate"><span class="pre">{{</span></code> ）。</p></li>
<li><p>如果传入的参数是键值对（即 <code class="docutils literal notranslate"><span class="pre">key=value</span></code> 的形式），请在花括号内注明键名称。这样的优势是代码可读性好。</p></li>
</ul>
<p>利用重复的键名或者重复的序号，可以反复使用同一个目标：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[86]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 复用 lang 变量</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;We are learning </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">. I love </span><span class="si">{0}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">ver</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;We are learning </span><span class="si">{mylang}</span><span class="s2"> </span><span class="si">{myver}</span><span class="s2">. I love </span><span class="si">{mylang}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mylang</span><span class="o">=</span><span class="n">lang</span><span class="p">,</span> <span class="n">myver</span><span class="o">=</span><span class="n">ver</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
We are learning Python 3. I love Python!
True
</pre></div></div>
</div>
<p>一个更复杂的例子是将输入参数转为特定的字符串格式，比如将浮点数转换为保留指定小数位的字符串。这时候需要用到冒号 <code class="docutils literal notranslate"><span class="pre">:</span></code> 来指定格式——格式指定位于冒号右侧，而键名（如果无则留空）位于冒号左侧：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[87]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span> <span class="o">=</span> <span class="mf">3.1415926535</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;PI = </span><span class="si">{:.5f}</span><span class="s2">...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;PI = </span><span class="si">{val:.5f}</span><span class="s2">...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;PI = {0:.</span><span class="si">{1}</span><span class="s2">f}...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">z</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PI = 3.14159...
True
True
</pre></div></div>
</div>
<p>Python 支持的格式有：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 45%" />
<col style="width: 19%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>格式声明</p></th>
<th class="head"><p>格式示例</p></th>
<th class="head"><p>解释</p></th>
<th class="head"><p>输入</p></th>
<th class="head"><p>输出</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:5s}</span></code></p></td>
<td><p>字符串，以最小宽5位输出</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;abc&quot;</span></code></p></td>
<td><p>” abc”</p></td>
</tr>
<tr class="row-odd"><td><p>任意数</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">e</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.2e}</span></code></p></td>
<td><p>科学计数法小数点后2位（默认6）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1.23e+03”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">E</span></code></p></td>
<td><p>/</p></td>
<td><p>同上，但输出时大写字母 E</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1.23E+03”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.4f}</span></code></p></td>
<td><p>保留小数点后4位（默认6）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1234.5670”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">F</span></code></p></td>
<td><p>/</p></td>
<td><p>同上，但输出时大写 NAN 与 INF</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float('inf')</span></code></p></td>
<td><p>“INF”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">g</span></code></p></td>
<td><p>/</p></td>
<td><p>接受数字，并自行判断输出格式</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.5g}</span></code></p></td>
<td><p>5位有效数字（自动定点格式）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1234.6”</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.3g}</span></code></p></td>
<td><p>3位有效数字（自动科学计数格式）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1.23e+03”</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:g}</span></code></p></td>
<td><p>（默认6位）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float('nan')</span></code></p></td>
<td><p>“nan”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">G</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.3G}</span></code></p></td>
<td><p>同上，但输出时使用大写的 E、NAN 与 INF</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“1.23E+03”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:+.2f}</span></code></p></td>
<td><p>正负数均标明符号；保留2位小数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>“+1234.57”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">␣</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:</span> <span class="pre">.2f}</span></code></p></td>
<td><p>正数空格，负数标明负号；保留2位小数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234.567</span></code></p></td>
<td><p>” 1234.57”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:.1%}</span></code></p></td>
<td><p>百分比，保留2位小数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.12</span></code></p></td>
<td><p>” 12.0%”</p></td>
</tr>
<tr class="row-even"><td><p>整数</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:d}</span></code></p></td>
<td><p>十进制整数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“123”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:b}</span></code></p></td>
<td><p>二进制整数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“1111011”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">o</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:o}</span></code></p></td>
<td><p>八进制整数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“173”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:x}</span></code></p></td>
<td><p>十六进制整数</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“7b”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>/</p></td>
<td><p>同上，但使用大写的 a~f</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“7B”</p></td>
</tr>
<tr class="row-even"><td><p>格式符</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:&gt;4d}</span></code></p></td>
<td><p>强制右对齐（数字对象默认）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>” 123”</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:0&gt;4d}</span></code></p></td>
<td><p>以0而不是空格补位</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“0123”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:&lt;4d}</span></code></p></td>
<td><p>强制左对齐（其他对象默认）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“123”</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:^4d}</span></code></p></td>
<td><p>强制居中对齐</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“123”</p></td>
</tr>
<tr class="row-odd"><td><p>其他</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">,</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:,}</span></code></p></td>
<td><p>以逗号千分位分隔</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1234</span></code></p></td>
<td><p>“1,234”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{:#b}</span></code></p></td>
<td><p>显式保留输入类型；如二进制以“0b”开头</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p>“0b1111011”</p></td>
</tr>
</tbody>
</table>
<p>下面是几个例子：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[88]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 在数字两侧各添加3个星号</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;{:*^</span><span class="si">{}</span><span class="s2">d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">+</span><span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
***1234***
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[89]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 输入给定十进制数的其他进制形式</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">123</span>
<span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="s2">&quot;dboxX&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Type </span><span class="si">{base}</span><span class="s2">: {val:#</span><span class="si">{base}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Type d: 123
Type b: 0b1111011
Type o: 0o173
Type x: 0x7b
Type X: 0X7B
</pre></div></div>
</div>
</div>
<div class="section" id="f-字符串">
<h4><span class="section-number">4.6.9.2. </span>f 字符串<a class="headerlink" href="#f-字符串" title="永久链接至标题">¶</a></h4>
<p>上面的例子均由 <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 方法实现，但是不足之处在于不能方便地直接利用已有的变量值。比如上文中给浮点数保留指定位数的例子，变量 <code class="docutils literal notranslate"><span class="pre">val</span></code> 与 <code class="docutils literal notranslate"><span class="pre">digits</span></code> 仍然需要显式地作为 <code class="docutils literal notranslate"><span class="pre">format()</span></code> 方法的输入参数：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[90]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span> <span class="o">=</span> <span class="mf">3.1415926535</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;PI = {0:.</span><span class="si">{1}</span><span class="s2">f}...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;PI = {myval:.</span><span class="si">{mydigits}</span><span class="s2">f}...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myval</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">mydigits</span><span class="o">=</span><span class="n">digits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">==</span><span class="n">y</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PI = 3.14159...
True
</pre></div></div>
</div>
<p>当然，采用上文所介绍过字典展开的方式，你可以用先声明一个字典，然后在传入时用双写星号前缀来展开……</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[91]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span> <span class="o">=</span> <span class="mf">3.1415926535</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;myval&quot;</span><span class="p">:</span> <span class="n">val</span><span class="p">,</span> <span class="s2">&quot;mydigits&quot;</span><span class="p">:</span> <span class="n">digits</span><span class="p">}</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;PI = {myval:.</span><span class="si">{mydigits}</span><span class="s2">f}...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PI = 3.14159...
</pre></div></div>
</div>
<p>这样， <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 方法的输入就显得不是太累赘。</p>
<p>但并不是所有数据都适合写入同一个字典里的。因此，我推荐使用更方便的 f 字符串来格式化字符串，在字符串的左侧引号之前添加字母 f 即可：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[92]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Python &gt;= 3.6</span>
<span class="n">val</span><span class="p">,</span> <span class="n">digits</span> <span class="o">=</span> <span class="mf">3.1415926535</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">x</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;PI = </span><span class="si">{</span><span class="n">val</span><span class="si">:</span><span class="s2">.</span><span class="si">{</span><span class="n">digits</span><span class="si">}</span><span class="s2">f</span><span class="si">}</span><span class="s2">...&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PI = 3.14159...
</pre></div></div>
</div>
<p>与 <code class="docutils literal notranslate"><span class="pre">x.format()</span></code> 方法一样，f 字符串支持格式化字串的所有格式。f 字符串也允许在花括号内进行合法的 Python 表达式书写：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[93]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="si">:</span><span class="s2">0&gt;4d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0008
</pre></div></div>
</div>
<p>但是，花括号中的表达式不能显示地含有反斜线：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[94]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A multiline string:</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;b&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-intense-fg ansi-bold">  File </span><span class="ansi-green-intense-fg ansi-bold">&#34;&lt;ipython-input-94-65ada2ec2e1b&gt;&#34;</span><span class="ansi-cyan-intense-fg ansi-bold">, line </span><span class="ansi-green-intense-fg ansi-bold">1</span>
<span class="ansi-yellow-intense-fg ansi-bold">    print(f&#34;A multiline string:\n{&#39;a&#39;+&#39;\n&#39;+&#39;b&#39;}&#34;)</span>
<span class="ansi-white-intense-fg ansi-bold">          ^</span>
<span class="ansi-red-intense-fg ansi-bold">SyntaxError</span><span class="ansi-red-intense-fg ansi-bold">:</span> f-string expression part cannot include a backslash

</pre></div></div>
</div>
<p>你可以通过将带反斜线的值赋值到变量来规避这一点：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[95]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A multiline string:</span><span class="se">\n</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
A multiline string:
a
b
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="大小写转换*">
<h3><span class="section-number">4.6.10. </span>大小写转换*<a class="headerlink" href="#大小写转换*" title="永久链接至标题">¶</a></h3>
<p>Python 提供了丰富的大小写转换支持，包括</p>
<ul class="simple">
<li><p>全体强制大小写 <code class="docutils literal notranslate"><span class="pre">upper()/lower()</span></code></p></li>
<li><p>仅首字母大写 <code class="docutils literal notranslate"><span class="pre">capitalize()</span></code></p></li>
<li><p>每个单词首字母大写 <code class="docutils literal notranslate"><span class="pre">title()</span></code></p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[96]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;It&#39;s a string. This is another.&quot;</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;全大写&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
    <span class="s2">&quot;全小写&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
    <span class="s2">&quot;首字母大写&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span>
    <span class="s2">&quot;单词首字母大写&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
<span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">:</span><span class="s2">10</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
全大写             IT&#39;S A STRING. THIS IS ANOTHER.
全小写             it&#39;s a string. this is another.
首字母大写           It&#39;s a string. this is another.
单词首字母大写         It&#39;S A String. This Is Another.
</pre></div></div>
</div>
<p>注意， <code class="docutils literal notranslate"><span class="pre">title()</span></code> 方法会将一些并非单词头的字母识别为单词头（比如上例中 <code class="docutils literal notranslate"><span class="pre">It's</span></code> 的字母 s）。要避免这一情形，可以配合正则表达式处理，参考 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/stdtypes.html?highlight=split#str.title">官方文档：str.title()</a> 。</p>
</div>
</div>
<div class="section" id="字典：dict">
<h2><span class="section-number">4.7. </span>字典：dict<a class="headerlink" href="#字典：dict" title="永久链接至标题">¶</a></h2>
<p>Python 的字典以键值对（key-value pairs）的形式存储数据：</p>
<ul class="simple">
<li><p>每一项数据之间用逗号 <code class="docutils literal notranslate"><span class="pre">,</span></code> 分隔，所有数据外侧用一组花括号 <code class="docutils literal notranslate"><span class="pre">{}</span></code> 包裹</p></li>
<li><p>每一项数据都是一组键值对，键与值之间用冒号 <code class="docutils literal notranslate"><span class="pre">:</span></code> 分隔</p></li>
<li><p>一个字典内，不能存在相同的键名</p></li>
<li><p>在 Python &gt;= 3.7 的版本中，字典的项变更为 <strong>有序的</strong> （指在循环中被迭代，或被强制转换成序列时，键或键值对的顺序是稳定的），其顺序与创建时每一项被加入的顺序相同。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[97]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># 空字典</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;b&#39;: 3}
</pre></div></div>
</div>
<p>字典的每一项数据的值可以是任意的数据类型。同时，不同于 JSON 文件中的键，Python 字典的键也可以是大多数类型（而不仅仅是字符串）。</p>
<p><em>从编程习惯上讲，我并不推荐在字典键中使用字符串以外的其他类型。</em></p>
<p>字典可以用 <code class="docutils literal notranslate"><span class="pre">len()</span></code> 来返回其键值对的个数，用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 来查询一个键是否在字典中：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[98]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0
False
</pre></div></div>
</div>
<div class="section" id="字典初始化">
<h3><span class="section-number">4.7.1. </span>字典初始化<a class="headerlink" href="#字典初始化" title="永久链接至标题">¶</a></h3>
<p>字典有许多初始化方式。</p>
<ul class="simple">
<li><p>依次添加键值对</p></li>
<li><p>利用 <code class="docutils literal notranslate"><span class="pre">dict()</span></code> 构造</p>
<ul>
<li><p>从成对序列数据中构造</p></li>
<li><p>显式地传入字面键值</p></li>
</ul>
</li>
<li><p>利用 <code class="docutils literal notranslate"><span class="pre">fromkeys()</span></code> 方法</p></li>
<li><p>字典解析</p></li>
</ul>
<p>最朴素的方式是依次添加键值对。先新建一个空字典，然后依次向内添加键值对：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[99]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2}
</pre></div></div>
</div>
<p>在键与值分别存储在两个序列中时，我们可以利用 for 循环：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[100]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">keys</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span>
<span class="n">vals</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2}
</pre></div></div>
</div>
<p>从成对序列数据中构造要求一种整合的数据存储方式。如果键与值是“成对地”存储在一个序列中，可以直接使用 <code class="docutils literal notranslate"><span class="pre">dict()</span></code> 来进行初始化：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[101]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2}
</pre></div></div>
</div>
<p>在字典数据不多时，也可能考虑显式地传入字面键值（键自动视为字符串）：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[102]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2}
</pre></div></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">fromkeys()</span></code> 方法能够快速初始化已知键名的字典，将所有键都赋同一个初始值（比如 <code class="docutils literal notranslate"><span class="pre">None</span></code> ）：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[103]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">keys</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: None, &#39;c&#39;: None, &#39;b&#39;: None}
</pre></div></div>
</div>
<p>类似于列表解析，字典也支持解析：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[104]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">}</span>

<span class="n">keys</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span>
<span class="n">vals</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span>
<span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vals</span><span class="p">)}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d1</span><span class="o">==</span><span class="n">d2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2} True
</pre></div></div>
</div>
</div>
<div class="section" id="字典的视图">
<h3><span class="section-number">4.7.2. </span>字典的视图<a class="headerlink" href="#字典的视图" title="永久链接至标题">¶</a></h3>
<p>由于字典有键、值、项（键值对）这三个概念，Python 也提供了对应的三种视图：</p>
<ul class="simple">
<li><p>键视图： <code class="docutils literal notranslate"><span class="pre">x.keys()</span></code> ，一个依序的、每个键为一个元素的序列</p></li>
<li><p>值视图： <code class="docutils literal notranslate"><span class="pre">x.values()</span></code> ，一个与键视图中的键依次对应的值组成的序列</p></li>
<li><p>项视图： <code class="docutils literal notranslate"><span class="pre">x.items()</span></code> ，一个依上述顺序的、每个元素是一个键值对元组的序列</p></li>
</ul>
<p>用 for 循环来展示一下这三种视图：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[105]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;val: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;item: </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
key: a
key: c
val: 1
val: 3
item: (&#39;a&#39;, 1)
item: (&#39;c&#39;, 3)
</pre></div></div>
</div>
<p>在 <code class="docutils literal notranslate"><span class="pre">x.keys()</span></code> 中循环其实与在 <code class="docutils literal notranslate"><span class="pre">x</span></code> 中循环的结果是相同的，都是遍历字典的键：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[106]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a
c
</pre></div></div>
</div>
<p>字典的项视图 <code class="docutils literal notranslate"><span class="pre">items()</span></code> 常常被用在 for 循环中，解包成两个循环变量：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[107]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a = 1
c = 3
</pre></div></div>
</div>
</div>
<div class="section" id="按键索引值：get()-/-setdefault()">
<h3><span class="section-number">4.7.3. </span>按键索引值：get() / setdefault()<a class="headerlink" href="#按键索引值：get()-/-setdefault()" title="永久链接至标题">¶</a></h3>
<p>要按字典键索引其对应的值，有以下几种方法：</p>
<ul class="simple">
<li><p>如果确认键 key 位于字典 x 中，可以直接使用该键来索引 <code class="docutils literal notranslate"><span class="pre">x[key]</span></code></p></li>
<li><p>如果键 key 可能不在 x 中：</p>
<ul>
<li><p>用 <code class="docutils literal notranslate"><span class="pre">x.get(key,</span> <span class="pre">default=None)</span></code> 方法，失败时它会返回一个备用值 <code class="docutils literal notranslate"><span class="pre">default</span></code></p></li>
<li><p>用 <code class="docutils literal notranslate"><span class="pre">x.setdefault(key,</span> <span class="pre">default=None)</span></code> 方法，失败时它会把键值对 <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">default</span></code> 添加到字典</p></li>
</ul>
</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[108]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<p>更安全的选择是使用 <code class="docutils literal notranslate"><span class="pre">x.get(key,</span> <span class="pre">default=None)</span></code> 方法。它的作用是：如果 key 存在于 x 的键中，那么返回该键对应的值；否则，返回 default 指定的值。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[109]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;Not in dict&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Not in dict
</pre></div></div>
</div>
<p>另一个选择是利用 <code class="docutils literal notranslate"><span class="pre">x.setdefault(key,</span> <span class="pre">default=None)</span></code> 方法。如果 key 存在于 x 的键中，那么返回该键对应的值；否则，将 default 值与 key 键组成键值对，加入到字典 x 中。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[110]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>  <span class="c1"># 键值对已经被添加</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2 2
</pre></div></div>
</div>
</div>
<div class="section" id="删除项：pop()-/-popitem()">
<h3><span class="section-number">4.7.4. </span>删除项：pop() / popitem()<a class="headerlink" href="#删除项：pop()-/-popitem()" title="永久链接至标题">¶</a></h3>
<p>最简单的自然是 <code class="docutils literal notranslate"><span class="pre">del()</span></code> 删除函数：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[111]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="k">del</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;c&#39;: 3, &#39;b&#39;: 2}
</pre></div></div>
</div>
<p>字典的 <code class="docutils literal notranslate"><span class="pre">x.pop(key)</span></code> 与列表在表现上类似，也是返回一个值的同时将其从容器中删除：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[112]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;c&#39;: 3, &#39;b&#39;: 2} 1
</pre></div></div>
</div>
<p>特别指出，方法 <code class="docutils literal notranslate"><span class="pre">pop()</span></code> 也有一个名为 <code class="docutils literal notranslate"><span class="pre">default</span></code> 的参数，会在字典不包含键时返回该 default 值（如果不显示地给出 default 的值，那么会造成 KeyError）。这一点与 <code class="docutils literal notranslate"><span class="pre">setdefault()</span></code> 方法相映成趣。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[113]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>    <span class="c1"># 正常返回 x[&quot;a&quot;]，并删除键 &quot;a&quot;</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>   <span class="c1"># 没有键 &quot;a&quot;，返回默认值 100</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;c&#39;: 3, &#39;b&#39;: 2} 1 100
</pre></div></div>
</div>
<p>最后，介绍 <code class="docutils literal notranslate"><span class="pre">popitem()</span></code> ，这个方法被用到的较少。它并不指定键名来抛出一个项，而是按照字典键的顺序，反向地依次抛出字典地项——即后进先出（LIFO），如同对栈容器进行弹栈操作一样。</p>
<p><em>对于 Python 3.7 之前的版本，它并不是依照 LIFO 顺序弹出字典项的，而是按照随机选择的顺序。</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[114]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;b&#39;, 2)
(&#39;c&#39;, 3)
(&#39;a&#39;, 1)
</pre></div></div>
</div>
</div>
<div class="section" id="更新字典：update()">
<h3><span class="section-number">4.7.5. </span>更新字典：update()<a class="headerlink" href="#更新字典：update()" title="永久链接至标题">¶</a></h3>
<p>通过 <code class="docutils literal notranslate"><span class="pre">x.update(y)</span></code> ，字典 x 可以根据字典 y 的键值对来就地更新字典 x 的数据：</p>
<ul class="simple">
<li><p>在字典 x 与 y 中都存在的键，以 y 中的值为准</p></li>
<li><p>仅在一个字典中存在的键，得以保留</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[115]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: -10, &#39;c&#39;: 3, &#39;b&#39;: 2, &#39;d&#39;: 4}
</pre></div></div>
</div>
<p>利用循环，我们可以实现与 <code class="docutils literal notranslate"><span class="pre">update()</span></code> 方法相同的效果：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[116]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
    <span class="n">x</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: -10, &#39;c&#39;: 3, &#39;b&#39;: 2, &#39;d&#39;: 4}
</pre></div></div>
</div>
</div>
<div class="section" id="更改键名*">
<h3><span class="section-number">4.7.6. </span>更改键名*<a class="headerlink" href="#更改键名*" title="永久链接至标题">¶</a></h3>
<p>字典并没有单独提供更改键名的方法，但这也是一个实用场景。由于 Python &gt;= 3.7 版本引入了字典键的顺序，要在更改键名时保持键的顺序也显得重要。</p>
<p>先说明一种会打乱键顺序的键名更改方法，那就是将指定键用 <code class="docutils literal notranslate"><span class="pre">pop(oldkey)</span></code> 弹出然后赋值给 <code class="docutils literal notranslate"><span class="pre">d[newkey]</span></code> 。下面以将键名改为小写为例：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[117]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">dkey</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">B</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">oldkey</span><span class="p">,</span> <span class="n">newkey</span> <span class="ow">in</span> <span class="n">dkey</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">d</span><span class="p">[</span><span class="n">newkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">oldkey</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;c&#39;: 3, &#39;b&#39;: 2, &#39;d&#39;: 4}
</pre></div></div>
</div>
<p>可以看到，字典 d 的键顺序也被打乱了。要保留顺序，只能遍历所有的字典键：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[118]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span>  <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">dkey</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="s2">&quot;d&quot;</span><span class="p">}</span>

<span class="n">oldkeys</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">oldkeys</span><span class="p">:</span>
    <span class="c1"># 如果有新键名则使用 dkey[k]，否则使用旧键名 k</span>
    <span class="n">d</span><span class="p">[</span><span class="n">dkey</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4}
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="集合">
<h2><span class="section-number">4.8. </span>集合<a class="headerlink" href="#集合" title="永久链接至标题">¶</a></h2>
<p>Python 中的集合借鉴了数学意义上的集合概念，要求内部的元素不能重复。</p>
<ul class="simple">
<li><p>集合 set 是可变的；Python 也提供了一种不可变集合 frozenset ，其不涉及可变性部分的用法与 set 大致相同。</p></li>
</ul>
<p>集合用花括号括起的、逗号分隔的多个项来表示。但是，空集合不能使用 <code class="docutils literal notranslate"><span class="pre">{}</span></code> 来指明（因为这代表空字典），请使用 <code class="docutils literal notranslate"><span class="pre">set()</span></code> 指明。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[119]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">z</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>   <span class="c1"># 空集合</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{1, 2, 3} {1, 2, 3} set()
</pre></div></div>
</div>
<p>集合同样支持长度度量 <code class="docutils literal notranslate"><span class="pre">len()</span></code> ，包含性检查 <code class="docutils literal notranslate"><span class="pre">in</span></code> ，以及循环遍历。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[120]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3 False
1 2 3
</pre></div></div>
</div>
<div class="section" id="集合运算与包含关系">
<h3><span class="section-number">4.8.1. </span>集合运算与包含关系<a class="headerlink" href="#集合运算与包含关系" title="永久链接至标题">¶</a></h3>
<p>集合运算包括交集、并集、差集、对称差集，包含关系包括（真）子集、（真）超集。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 10%" />
<col style="width: 27%" />
<col style="width: 23%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>运算</p></th>
<th class="head"><p>说明</p></th>
<th class="head"><p>运算符</p></th>
<th class="head"><p>示例</p></th>
<th class="head"><p>集合方法</p></th>
<th class="head"><p>示例</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>交</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&amp;</span> <span class="pre">b</span></code></p></td>
<td><p>同时位于两个集合中的元素</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">intersection</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.intersection(b,</span> <span class="pre">c,</span> <span class="pre">...)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>并</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\|</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">\|</span> <span class="pre">b</span></code></p></td>
<td><p>至少位于其一集合中的元素</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">union</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.union(b，c,</span> <span class="pre">...)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>差</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span></code></p></td>
<td><p>只位于 a 而不位于 b 的元素</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">difference</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.difference(b,</span> <span class="pre">c,</span> <span class="pre">...)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>对称差</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">^</span> <span class="pre">b</span></code></p></td>
<td><p>位于且仅位于其一集合中的元素</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">symmetric_difference</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.symmetric_difference(b)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>子集</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code></p></td>
<td><p>a 的所有元素都在 b 中</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">issubset</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.issubset(b)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>真子集</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code></p></td>
<td><p>a 是 b 的子集且 a、b 不同</p></td>
<td><p>/</p></td>
<td><p>/</p></td>
</tr>
<tr class="row-even"><td><p>超集</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&gt;=</span> <span class="pre">b</span></code></p></td>
<td><p>b 的所有元素都在 a 中</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">issuperset</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.issuperset(b)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>真超集</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code></p></td>
<td><p>b 是 a 的子集且 a、b 不同</p></td>
<td><p>/</p></td>
<td><p>/</p></td>
</tr>
<tr class="row-even"><td><p>互斥</p></td>
<td><p>/</p></td>
<td><p>/</p></td>
<td><p>a 与 b 没有共同元素</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">isdisjoint()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a.isdisjoint(b)</span></code></p></td>
</tr>
</tbody>
</table>
<p>注意，上述命令中：</p>
<ul class="simple">
<li><p>交、并、差可以输入多个集合（如最后一列所示）。如果使用运算符，则用重复使用相同的运算符连接即可。</p></li>
<li><p>对于“运算符”这一列命令，变量 a 与 b 都必须是集合（或者不可变集合）类型。对于“集合方法”这一列命令，只有 a 必须是严格的集合（或者不可变集合）类型，b 可以是任意的可迭代对象。</p></li>
<li><p>上述集合方法也可以用 <code class="docutils literal notranslate"><span class="pre">set</span></code> 来调用。例如，取差集可以写为 <code class="docutils literal notranslate"><span class="pre">set.difference(a,</span> <span class="pre">b)</span></code> 。</p></li>
<li><p>上述运算的返回值的结果均以 a 为准。例如，如果 a 是 set 类型而 b 是 frozenset 类型，那么返回值将是 set 类型。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[121]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_funcs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;交&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">,</span>
    <span class="s2">&quot;并&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">,</span>
    <span class="s2">&quot;差&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">difference</span><span class="p">,</span>
    <span class="s2">&quot;对称差&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">,</span>
    <span class="s2">&quot;子集&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">issubset</span><span class="p">,</span>
    <span class="s2">&quot;超集&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">issuperset</span><span class="p">,</span>
    <span class="s2">&quot;互斥&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">isdisjoint</span>
<span class="p">}</span>

<span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">set_funcs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">:</span><span class="s2">8</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
交               {2}
并               {1, 2, 3, 4, 5}
差               {1, 3}
对称差             {1, 3, 4, 5}
子集              False
超集              False
互斥              False
</pre></div></div>
</div>
</div>
<div class="section" id="更新集合">
<h3><span class="section-number">4.8.2. </span>更新集合<a class="headerlink" href="#更新集合" title="永久链接至标题">¶</a></h3>
<p>集合的更新是就地更新，也涉及到上面的集合运算：</p>
<ul class="simple">
<li><p>直接更新 <code class="docutils literal notranslate"><span class="pre">a.update(b,</span> <span class="pre">...)</span></code> ，即将并集赋回，等同于 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">|=</span> <span class="pre">b</span> <span class="pre">|</span> <span class="pre">...</span></code></p></li>
<li><p>只保留交集 <code class="docutils literal notranslate"><span class="pre">a.intersection_update(b,</span> <span class="pre">...)</span></code> ，即将交集赋回，等同于 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&amp;=</span> <span class="pre">b</span> <span class="pre">&amp;</span> <span class="pre">...</span></code></p></li>
<li><p>只保留差集 <code class="docutils literal notranslate"><span class="pre">a.difference_update(b,</span> <span class="pre">...)</span></code> ，等同于 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-=</span> <span class="pre">b</span> <span class="pre">|</span> <span class="pre">...</span></code></p></li>
<li><p>只保留对称差集 <code class="docutils literal notranslate"><span class="pre">a.symmetric_difference_update(b)</span></code> ，等同于 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">^=</span> <span class="pre">b</span></code></p></li>
</ul>
<p>以上命令中，除了对称差以外的运算都可以输入多个集合。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[122]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_funcs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;（并）更新&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">update</span><span class="p">,</span>
    <span class="s2">&quot;交更新&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection_update</span><span class="p">,</span>
    <span class="s2">&quot;差更新&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">difference_update</span><span class="p">,</span>
    <span class="s2">&quot;对称差更新&quot;</span><span class="p">:</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference_update</span>
<span class="p">}</span>

<span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">set_funcs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">a_copy</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># 拷贝一个副本，避免直接对 a 改动</span>
    <span class="n">func</span><span class="p">(</span><span class="n">a_copy</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">text</span><span class="si">:</span><span class="s2">8</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">a_copy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
（并）更新           {1, 2, 3, 4, 5}
交更新             {2}
差更新             {1, 3}
对称差更新           {1, 3, 4, 5}
</pre></div></div>
</div>
</div>
<div class="section" id="增删元素">
<h3><span class="section-number">4.8.3. </span>增删元素<a class="headerlink" href="#增删元素" title="永久链接至标题">¶</a></h3>
<p>本节中的命令只对可变集合（set 类型）有效，对不可变集合（frozenset 类型）无效 。</p>
<ul class="simple">
<li><p>增加：<code class="docutils literal notranslate"><span class="pre">add(elem)</span></code></p></li>
<li><p>移除：</p>
<ul>
<li><p>移除指定：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">remove(elem)</span></code> ：移除一个不存在集合中的元素时会造成 KeyError</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">discard(elem)</span></code> ：尝试移除一个元素，如果不存在集合中则静默</p></li>
</ul>
</li>
<li><p>随机移除： <code class="docutils literal notranslate"><span class="pre">pop()</span></code> ，随机返回一个集合中的元素，并将其从集合中移除</p></li>
<li><p>清空： <code class="docutils literal notranslate"><span class="pre">clear()</span></code></p></li>
</ul>
</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[123]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After add</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

<span class="n">a</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After remove</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

<span class="n">a</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After discard</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
After add        {1, 2, 3, 4}
After remove     {1, 2, 4}
After discard    {1, 2, 4}
</pre></div></div>
</div>
<p>其中， <code class="docutils literal notranslate"><span class="pre">pop()</span></code> 与 <code class="docutils literal notranslate"><span class="pre">clear()</span></code> 十分易懂，这里就不再用代码说明了。</p>
</div>
</div>
<div class="section" id="其他">
<h2><span class="section-number">4.9. </span>其他<a class="headerlink" href="#其他" title="永久链接至标题">¶</a></h2>
<p>Python 中提供了一个比较奇怪的变量，即单下划线 <code class="docutils literal notranslate"><span class="pre">_</span></code> —— 虽然从理论上讲，下划线是变量名中可以使用的合法字符，这个变量名本应如同单字符变量名 <code class="docutils literal notranslate"><span class="pre">x</span></code>、<code class="docutils literal notranslate"><span class="pre">s</span></code> 一样自然。</p>
<p>它的作用一般有：</p>
<ol class="arabic simple">
<li><p>在交互式 Python 运行环境中，它会自动记录最后一次代码执行的结果。</p></li>
<li><p>习惯上，我们将不需要用到的变量值用该变量标记。例如：</p>
<ul class="simple">
<li><p>不使用的返回值：<code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">_</span> <span class="pre">=</span> <span class="pre">divmod(7,</span> <span class="pre">2)</span></code></p></li>
<li><p>不使用的循环变量值：<code class="docutils literal notranslate"><span class="pre">[None</span> <span class="pre">for</span> <span class="pre">_</span> <span class="pre">in</span> <span class="pre">range(3)]</span></code></p></li>
<li><p>不使用的匿名变量输入值：<code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">_:</span> <span class="pre">1</span></code></p></li>
</ul>
</li>
<li><p>避免编辑器的语法检查。Python 语法检查器会忽略 <code class="docutils literal notranslate"><span class="pre">_</span></code> 变量；而其他变量如果声明而未在后文引用，检查器会发出警告。</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Functions.html" class="btn btn-neutral float-right" title="5. 函数与迭代器" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ControlFlow.html" class="btn btn-neutral float-left" title="3. 流程控制语句" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 版权所有 wklchris

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 

<script>
  require.config({
     paths: {
        "jquery": "/_static/jquery",
        "datatables": "/_config/static/DataTables/datatables.min"
     }
  });
  requirejs( ["datatables"], function () {
     $('#tableofblogs').DataTable( {
        language: {
           url: "/_config/static/DataTables/zh_CN.json" 
        } 
     } );
  } );
</script>

<div class="footer">本页面采用 <a href="https://analytics.google.com/">Google Analytics</a> 来记录访问数据. 您可以通过屏蔽来自 www.google-analytics.com 的 JavaScript 来阻止该记录行为.
<script>
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>



</body>
</html>